services:
  frontend:
    build: ./frontend
    environment:
      - REACT_APP_DD_APP_ID=${DD_RUM_APP_ID}
      - REACT_APP_DD_CLIENT_TOKEN=${DD_RUM_CLIENT_TOKEN}
      - DD_ENV=local
      - DD_SERVICE=frontend
    ports:
      - "3000:80"

  backend:
    build: ./backend
    environment:
      - DD_SERVICE=backend
      - DD_ENV=local
      - DD_VERSION=1.0.0
      - DD_AGENT_HOST=host.docker.internal
      - DD_LOGS_INJECTION=true
      - DD_TRACE_AGENT_PORT=8126
      - DD_DOGSTATSD_PORT=8125
    ports:
      - "8000:8000"

  agent:
    build: ./agents
    environment:
      - DD_ENV=local
      - DD_SERVICE=agents
      - DD_AGENT_HOST=host.docker.internal
      - DD_LOGS_INJECTION=true
      - DD_TRACE_AGENT_PORT=8126
      - DD_DOGSTATSD_PORT=8125

  registry:
    build: ./registry
    environment:
      - DD_ENV=local
      - DD_SERVICE=registry
      - DD_AGENT_HOST=host.docker.internal
      - DD_LOGS_INJECTION=true
      - DD_TRACE_AGENT_PORT=8126
      - DD_DOGSTATSD_PORT=8125

  mcp:
    build: ./mcp
    environment:
      - DD_ENV=local
      - DD_SERVICE=mcp-server
      - DD_AGENT_HOST=host.docker.internal
      - DD_LOGS_INJECTION=true
      - DD_TRACE_AGENT_PORT=8126
      - DD_DOGSTATSD_PORT=8125
